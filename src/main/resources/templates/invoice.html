<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Nesto - Invoice</title>
    <style>
        body { font-family: 'Courier New', monospace; background: #999; padding: 20px; }
        .invoice-card {
            background: white; width: 400px; margin: auto; padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .text-center { text-align: center; }
        .header h2 { margin: 0; letter-spacing: 2px; }
        .divider { border-top: 1px dashed #000; margin: 15px 0; }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; border-bottom: 1px solid #000; }
        .total-row { font-size: 1.2em; font-weight: bold; }
        .no-print {
            margin-top: 20px; display: flex; justify-content: space-between;
        }
        .btn { padding: 8px 15px; text-decoration: none; border-radius: 5px; cursor: pointer; border: none; }
        .btn-print { background: #27ae60; color: white; }
        .btn-back { background: #34495e; color: white; }

        @media print {
            .no-print { display: none; }
            body { background: white; padding: 0; }
            .invoice-card { box-shadow: none; border: none; width: 100%; }
        }
    </style>
</head>
<body>

<div class="invoice-card">
    <div class="header text-center">
        <h2>NESTO SUPERMARKET</h2>
        <p>Annasalai, Chennai<br>GSTIN: 33AAAAA0000A1Z5</p>
    </div>

    <div class="divider"></div>

    <div>
        <strong>Invoice:</strong> <span th:text="${'#INV-' + sale.id}"></span><br>
        <strong>Date:</strong> <span th:text="${#temporals.format(sale.saleDate, 'dd/MM/yyyy HH:mm')}"></span><br>
        <strong>Customer:</strong> <span th:text="${sale.customer.name}"></span>
    </div>

    <div class="divider"></div>

    <table>
        <thead>
        <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Price</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${sale.items}">
            <td th:text="${item.product.name}"></td>
            <td th:text="${item.quantity}"></td>
            <td th:text="${'₹' + item.subtotal}"></td>
        </tr>
        </tbody>
    </table>

    <div class="divider"></div>

    <div class="total-row">
        Total Bill: <span th:text="${'₹' + sale.totalBill}"></span>
    </div>

    <div class="text-center" style="margin-top: 20px;">
        <p>Thank You For Shopping at Nesto!</p>
    </div>

    <div class="no-print">
        <a th:href="@{/sales}" class="btn btn-back">Back</a>
        <button onclick="window.print()" class="btn btn-print">Print Receipt</button>
    </div>
</div>

</body>
</html>